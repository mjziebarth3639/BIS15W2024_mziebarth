geom_jitter(na.rm=T) +
geom_smooth(method=lm, se=F)+ # adds a bet fit line, standard error is false
labs(title="Homerange Mass vs HRA", #adds a title
x="Mass",
y="HRA")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=order))+
geom_jitter(na.rm=T) +
labs(title="Homerange Mass vs HRA", #adds a title
x="Mass",
y="HRA")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) # rel is teh
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T) +
labs(title="Homerange Mass vs HRA", #adds a title
x="Mass",
y="HRA")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) # rel is title size relative ot the graph, hjust is thw title position(center)
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
surgery <- read_csv("data/surgery.csv")
head(surgery)
miss_var_summary()
miss_var_summary(surgery)
View(surgery)
surgery %>%
count(race)
surgery %>%
count(race) %>%
ggplot(aes(x=race, y=n))+
geom_col()
surgery %>%
count(race, na.rm=T) %>%
ggplot(aes(x=race, y=n))+
geom_col()
surgery %>%
filter(race!="NA")
count(race, na.rm=T) %>%
ggplot(aes(x=race, y=n))+
geom_col()
surgery %>%
filter(race!="NA") %>%
count(race, na.rm=T) %>%
ggplot(aes(x=race, y=n))+
geom_col()
surgery %>%
group_by(gender) %>%
summarize(mean_age=mean(age))
surgery %>%
filter(gender!="NA") %>%
group_by(gender) %>%
summarize(mean_age=mean(age))
surgery %>%
filter(gender!="NA") %>%
group_by(gender) %>%
summarize(mean_age=mean(age))
surgery %>%
filter(gender!="NA") %>%
group_by(gender) %>%
summarize(mean_age=mean(age, na.rm=T))
surgery %>%
ggplot(aes(x=gender, y=age)) %>%
geom_boxplot()
surgery %>%
ggplot(aes(x=gender, y=age))+
geom_boxplot()
surgery %>%
filter(gender!="NA") %>%
ggplot(aes(x=gender, y=age))+
geom_boxplot()
surgery %>%
filter(asa_status=="I-II", asa_status=="III", asa_status=="IV-V")
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-V")
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-V") %>%
ggplot(aes(asa_status))+
geom_bar
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-V") %>%
ggplot(aes(asa_status))+
geom_bar()
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-V")
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-VI") %>%
ggplot(aes(asa_status))+
geom_bar()
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-VI") %>%
group_by(asa_status) %>%
ggplot(aes(x=bmi)) +
geom_histogram(aes(y = after_stat(density)))+
geom_density()
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-VI") %>%
group_by(asa_status) %>%
ggplot(aes(x=bmi)) +
geom_bar(aes(y = after_stat(density)))+
geom_density()
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-VI") %>%
group_by(asa_status) %>%
geom_density()
surgery %>%
filter(asa_status=="I-II"| asa_status=="III" | asa_status=="IV-VI") %>%
group_by(asa_status) %>%
ggplot(aes(x=bmi)) +
geom_density()
surgery %>%
select(ahrq_ccs, ccsmort30rate, mort30) %>%
group_by(ahrq_ccs)
surgery %>%
select(ahrq_ccs, ccsmort30rate, mort30) %>%
group_by(ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs) %>%
n_distinct(ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs) %>%
n_distinct()
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs) %>%
top_n(-5, ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs, n_distinct) %>%
top_n(-5, ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
select(ahrq_ccs, ccsmort30rate) %>%
group_by(ahrq_ccs) %>%
top_n(-5, ahrq_ccs) %>%
arrange(desc(ccsmort30rate))
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate))+
geom_histogram()
surgery %>%
select(month, mort30) %>%
group_by(month)
knitr::opts_chunk$set(echo = TRUE)
surgery %>%
ggplot(aes(x=race, fill=race))+
geom_bar(alpha=0.6, color="black")+
labs(title="Participants by Race",
x=NULL,
y="# participants")+
theme_light()
surgery %>%
filter(gender!="NA") %>%
group_by(gender) %>%
summarize(mean_age=mean(age, na.rm=T))
surgery %>%
filter(gender!="NA") %>%
ggplot(aes(x=gender, y=age, fill=gender))+
geom_boxplot(na.rm=T, alpha=0.6)+
labs(title="Range of Participants' Age by Gender",
x=NULL,
y="Age (years)")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title="ASA Status of Participants", x="ASA", y="# Participants")+
theme_light()
surgery %>%
ggplot(aes(x=bmi))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~asa_status)+
labs(title="Distribution of BMI", x="BMI", y=NULL)+
theme_light()
surgery %>%
ggplot(aes(x=bmi))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(x=log10.mass))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~taxon)
homerange %>%
ggplot(aes(x=log10.mass))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~taxon)
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(eval = FALSE)
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T)
homerange %>%
ggplot(aes(x=order, y=log10.hra))+
geom_boxplot()+
coord_flip() # flips the x and y to make it look cleaner
homerange %>%
ggplot(aes(x=order))+
geom_bar()
homerange %>%
count(order, sort=T) %>%
ggplot(aes(x=order, y=n))+
geom_col()
homerange %>%
ggplot(aes(x = log10.mass)) +
geom_histogram(bins = 20)+ #we can adjust the number of bins with the bins argument
labs(title = "Distribution of Body Mass")
homerange %>%
ggplot(aes(x = log10.mass)) +
geom_density()
homerange %>%
ggplot(aes(x=log10.mass)) +
geom_histogram(aes(y = after_stat(density)))+
geom_density()
homerange %>%
ggplot(aes(x=order, fill=primarymethod))+
geom_bar(position = "dodge", na.rm=T) #moves the stacks to side by side
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=primarymethod))+
geom_jitter(na.rm=T)
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T) +
labs(title="Homerange Mass vs HRA", #adds a title
x="Mass",
y="HRA")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) # rel is title size relative ot the graph, hjust is the title position (center)
homerange %>%
ggplot(aes(x=log10.mass))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~taxon)
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange <- read_csv("data_full/Tamburelloetal_HomeRangeDatabase.csv")
options(scipen=999) #cancels the use of scientific notation for the session
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_point()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T)
homerange %>%
ggplot(aes(x=log10.mass))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~taxon)
source("~/.active-rstudio-document", echo=TRUE)
surgery %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate)) %>%
arrange(desc(ccsmort30rate)) %>%
slice_max(ccsmort30rate, n=5)
View(mammals)
mammals %>%
group_by(family) %>%
summarize(mean_mass=mean(mass)) %>%
arrange(desc(mean_mass)) %>%
slice_max(mass, n=5)
mammals %>%
group_by(family) %>%
summarize(mean_newborn=mean(newborn)) %>%
arrange(desc(mean_newborn)) %>%
slice_max(mass, n=5)
mammals %>%
group_by(family) %>%
summarize(mean_newborn=mean(newborn)) %>%
arrange(desc(mean_newborn)) %>%
slice_max(mean_newborn, n=5)
colleges %>%
select(class, mass) %>%
top_n(-15, mass)
mammals%>%
select(class, mass) %>%
top_n(-15, mass)
mammals%>%
select(species, mass) %>%
top_n(-15, mass)
mammals <- read_csv("mammal_lifehistories_v2.csv", na = c("-999.00", "-999"))
mammals%>%
select(species, mass) %>%
top_n(-15, mass)
surgery %>%
group_by(ahrq_ccs) %>%
summarise(ccscomplicationrate=mean(ccscomplicationrate)) %>%
arrange(desc(ccscomplicationrate)) %>%
slice_max(ccscomplicationrate, n=5)
surgery %>%
select(ahrq_ccs, ccsmort30rate, ccscomplicationrate) %>%
filter(ahrq_ccs %in% c("Colorectal resection", "Small bowel resection", "Gastrectomy; partial and total", "Endoscopy and endoscopic biopsy of the urinary tract", "Spinal fusion", "Nephrectomy; partial or complete")) %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate),
ccscomplicationrate=mean(ccscomplicationrate))
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate, group=ahrq_ccs))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)+
coord_flip()+
labs(title="30-Day Mortality by Procedure",
x=NULL,
y="Rate")+
theme_light()
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0)) %>%
group_by(month) %>%
summarise(n_deaths=sum(mort30_n),
n_comp=sum(complication_n))
surgery_new
surgery %>% tabyl(month, mort30)
surgery %>% tabyl(month, complication)
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(alpha=0.8, fill="steelblue", color="black")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
View(homerange)
homerange %>%
ggplot(aes(x=taxon))+
geom_bar(na.rm=T)
homerange %>%
ggplot(aes(x=taxon))+
geom_bar(na.rm=T) +
labs(title="Number of Observations per Taxon",
x="Taxon Name",
y="# of Observations")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))
homerange %>%
ggplot(aes(x=taxon))+
geom_bar((alpha=0.8, fill="lightblue", color="black", na.rm=T) +
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col((alpha=0.8, fill="lightblue", color="black", na.rm=T) +
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col((fill="lightblue", color="black", na.rm=T) +
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col(alpha=0.8, fill="lightblue", color="black", na.rm=T) +
labs(title="Number of Observations per Taxon",
x="Taxon Name",
y="# of Observations")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) +
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col(alpha=0.8, fill="lightblue", color="black", na.rm=T)
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col(alpha=0.8, fill="lightblue", color="black", na.rm=T) +
labs(title="Number of Observations per Taxon",
x="Taxon Name",
y="# of Observations")
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col(alpha=0.8, fill="lightblue", color="black", na.rm=T) +
labs(title="Number of Observations per Taxon",
x="Taxon Name",
y="# of Observations")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) +
scale_x_discrete(limits=c("mammals", "birds", "marine fishes", "snakes", "turtles", "river fishes", "tortoises", "lizards", "lake fishes"))+
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col(alpha=0.8, fill="lightblue", color="black", na.rm=T) +
labs(title="Number of Observations per Taxon",
x="Taxon Name",
y="# of Observations")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) +
scale_x_discrete(limits=c("mammals", "birds", "marine fishes", "snakes", "turtles", "river fishes", "tortoises", "lizards", "lake fishes"))
homerange %>%
count(taxon) %>%
ggplot(aes(x=taxon, y=n))+
geom_col(alpha=0.8, fill="lightblue", color="black", na.rm=T) +
labs(title="Number of Observations per Taxon",
x="Taxon Name",
y="# of Observations")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5)) +
scale_x_discrete(limits=c("mammals", "birds", "marine fishes", "snakes", "turtles", "river fishes", "tortoises", "lizards", "lake fishes")) +
theme_classic()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T)+
geom_smooth()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T)+
geom_smooth( se=F)
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra))+
geom_jitter(na.rm=T)+
geom_smooth(method=lm, se=F)
library(RColorBrewer)
library(paletteer)
install.packages("paletteer")
library(RColorBrewer)
library(paletteer)
install.packages("ggthemes")
library(RColorBrewer)
library(paletteer)
library(ggthemes)
gomerange %>%
scale_fill_brewer(palette = "PuBuGn")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
homerange %>%
scale_fill_brewer(palette = "PuBuGn")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
homerange %>%
ggplot(aes(x=taxon, fill=trophic.guild))+
geom_bar(na.rm=T, position="dodge") +
scale_fill_brewer(palette = "PuBuGn")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
my_palette <- paletteer_d("ggsci::nrc_npg") #store your palette
colors <- paletteer::palettes_d_names
my_palette <- paletteer_d("ggsci::nrc_npg") #store your palette,
colors <- paletteer::palettes_d_names #shows palettes
my_palette <- paletteer_d("ggsci::nrc_npg") #store your palette,
homerange %>%
ggplot(aes(x=taxon, fill=trophic.guild))+
geom_bar(na.rm=T, position="dodge") +
scale_fill_manual(values=my_palette)+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
homerange %>%
ggplot(aes(x=taxon, y=log10.mass))+
geom_boxplot()+
facet_grid(.~trophic.guild)+
theme(axis.text.x = element_text(angle = 60, hjust=1))
homerange %>%
ggplot(aes(x=taxon, y=log10.mass))+
geom_boxplot()+
facet_wrap(~trophic.guild)+
theme(axis.text.x = element_text(angle = 60, hjust=1))
homerange %>%
ggplot(aes(x=taxon, y=log10.mass))+
geom_boxplot()+
facet_grid(trophic.guild~thermoregulation)+
theme(axis.text.x = element_text(angle = 60, hjust=1))
homerange %>%
ggplot(aes(x=taxon, y=log10.mass))+
geom_boxplot()+
facet_grid(.~trophic.guild)+
theme(axis.text.x = element_text(angle = 60, hjust=1))
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=primarymethod))+
geom_jitter(na.rm=T)+
theme_grey()
homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=primarymethod))+
geom_jitter(na.rm=T)+
theme_classic()
