facet_wrap(~injury)+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
sharks %>%
select(incident_num, mode, injury) %>%
ggplot(aes(x=mode))+
geom_bar(alpha=0.5, fill="red3", color="black") +
labs(title="Activity Done During Incident and Injury",
x="Mode",
y="Number of Incidents")+
facet_wrap(~injury)+
theme(plot.title=element_text(size=rel(1.25), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
white_sharks %>%
select(sex, total_length_cm) %>%
filter(sex!="NA") %>%
ggplot(aes(x=sex, y=total_length_cm, fill=sex))+
geom_boxplot(color="black") +
labs(title="Average Length vs Sex",
x="Sex",
y="Total Length (cm)")+
theme(plot.title=element_text(size=rel(2), hjust = 0.5))+
theme_light()
View(white_sharks)
#What location has the most incidents per year?
sharks %>%
count(location)
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year"))
count(location)
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
count(location)
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
count(location) %>%
ggplot(x=year, y=location, fill=n)
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
count(location) %>%
ggplot(x=year, y=location, fill=n) +
geom_jitter()
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
count(location) %>%
ggplot(x=n, y=location, fill=year) +
geom_jitter()
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
count(location) %>%
ggplot(x=n, y=location, color=year) +
geom_jitter()
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
count(location) %>%
ggplot(x=loation, y=n, color=year) +
geom_jitter()
#What location has the most incidents per year?
sharks %>%
mutate(as.factor("year")) %>%
ggplot(x=loation, y=n, color=year) +
geom_jitter()
#What depth interacts with what species?
sharks %>%
ggplot(aes(x=depth, y=species))
#What depth interacts with what species?
sharks %>%
ggplot(aes(x=species, y= depth))+
geom_point()
#What depth interacts with what species?
sharks %>%
ggplot(aes(x=species, y= depth))+
geom_col()
#What location has teh most incidnts per year
sharks %>%
ggplot(aes(x=year, y= loction))+
geom_col()
#What location has the most incidents per year?
sharks %>%
ggplot(aes(x=year, y= loction))+
geom_col()
#What location has the most incidents per year?
sharks %>%
select(year, location)
ggplot(aes(x=year, y= loction))+
geom_col()
#What location has the most incidents per year?
sharks %>%
select(year, location) %>%
count(location) %>%
ggplot(aes(x=year, y= loction))+
geom_col()
#What county has the most incidents per year?
sharks %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=year, y= loction))+
geom_col()
#What county has the most incidents per year?
sharks %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=year, y= county))+
geom_col()
#What county has the most incidents per year?
sharks %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, y=n, fill=year))+
geom_col()
#What county has the most incidents per year?
sharks %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, y=n)+
geom_col()
#What county has the most incidents per year?
sharks %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, y=n))+
geom_col()
#What county has the most incidents per year?
sharks %>%
mutate(as.factor(year)) %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, y=n))+
geom_col()
#What county has the most incidents per year?
sharks %>%
mutate(as.factor(year)) %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, y=n, fill=year))+
geom_col()
#What county has the most incidents per year?
sharks %>%
mutate(as.factor(year)) %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, y=n))+
geom_col()
#What county has the most incidents per year?
sharks %>%
mutate(as.factor(year)) %>%
select(year, county) %>%
count(county) %>%
ggplot(aes(x=county, fill=year))+
geom_bar()
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2004") %>%
count(county)
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2004") %>%
count(county) %>%
```
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2004") %>%
count(county) %>%
top_n(5, county)
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2004") %>%
count(county) %>%
top_n(5, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lavender", color="black") +
labs(title="Incident Hotspots",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
sharks %>% count(year)
sharks %>% count(year) %>% arrange(desc(year))
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
count(county) %>%
top_n(5, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lavender", color="black") +
labs(title="Incident Hotspots",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(5, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lavender", color="black") +
labs(title="Incident Hotspots",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(5, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Incident Hotspots",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(5, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top4 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.75), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 3 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(3, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top 3 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.25), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 3 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(3, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top 3 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.5), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 3 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(4, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top 3 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.5), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 5 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(-5, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top 5 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.5), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 3 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(-3, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top 3 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.5), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
#What top 3 counties has the most incidents in 2004?
sharks %>%
select(year, county) %>%
filter(year=="2017") %>%
top_n(4, county) %>%
ggplot(aes(x=county))+
geom_bar(alpha=0.9, fill="lightyellow", color="black") +
labs(title="Top 3 Number of Incidents Per County in 2017",
x="County",
y="Number of Incidents")+
theme(plot.title=element_text(size=rel(1.5), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
sharks %>%
tabyl(county, injury)
sharks %>% group_by(county) %>%
tabyl(county, injury)
sharks %>%
count(injury) %>%
tabyl(county, injury)
sharks %>%
count(county) %>%
tabyl(county, injury)
sharks %>%
tabyl(county, injury)
sharks %>%
filter(injury=="fatal") %>%
tabyl(county, injury)
sharks %>%
tabyl(injury, county)
sharks %>%
select(incident_num, mode, injury) %>%
ggplot(aes(x=injury))+
geom_bar(alpha=0.5, fill="red3", color="black") +
labs(title="Activity Done During Incident and Injury",
x="Type of Injury",
y="Number of Incidents")+
facet_wrap(~mode)+
theme(plot.title=element_text(size=rel(1.25), hjust = 0.5))+
theme(axis.text.x = element_text(angle = 70, hjust=1))
theme_light()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
files <- list.files(path = "data/spiders", pattern = ".csv", full.names = TRUE)
files
spider_list <- lapply(files, read_csv)
spider_list <- lapply(files, read_csv)
files <- list.files(path = "data/spiders", pattern = ".csv", full.names = TRUE)
files
spider_list <- lapply(files, read_csv)
spider_list[[3]]
View(spider_list)
glimpse(spider_list[[5]])
names(spider_list[[1]])
names <- list.files(path = "data/spiders", pattern = ".csv")
names
names_list <- strsplit(names, split = " .csv")
names_list
names_vec <- unlist(names_list)
names_vec
names(spider_list) <- names_vec
names(spider_list)
spider_list %>%
select(b=Butte)
spider_list %>%
select(Butte)
spider_list %>%
filter(names=="Butte")
spider_list %>%
filter(names=="Butte")
spider_list[["Butte"]]
spiders_all <- bind_rows(spider_list)
spiders_all
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
join_type(firstTable, secondTable, by=columnTojoinOn)
inner_exampleDF <- inner_join(table_A, table_B, by="customer_ID")
inner_exampleDF
left_exampleDF <- left_join(table_A, table_B, by="customer_ID")
left_exampleDF
right_exampleDF <- right_join(table_A, table_B, by="customer_ID")
right_exampleDF
full_exampleDF <- full_join(table_A, table_B, by="customer_ID")
full_exampleDF
anti_exampleDF <- anti_join(table_A, table_B, by="customer_ID")
anti_exampleDF
spiders_locs <- read_csv("data/spiders locations/spiders_locations.csv")
View(spiders_locs)
spiders_with_locs <- join_full(spiders_all, spiders_locs, by="Accession")
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
spiders_with_locs <- left_join(spiders_all, spiders_locs, by="Accession")
summary(spiders_with_locs)
day <- today()
day
str(day)
datetime <- now()
datetime
dmy(spiders_with_locs$Date)
View(spiders_with_locs)
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
dmy("20200922")
ymd("20200922")
mdy("09-22-2020")
dmy("22/09/2020")
mdy_hms("09-22-2020 17:00:00")
ymd_hms("20200922 170000")
write.csv(spiders_with_locs, file = "spiders_with_locs.csv", row.names = FALSE)
library(tidyverse)
library(janitor)
#install.packages("ggmap")
library(ggmap)
register_stadiamaps("e77f55a8-a371-44cd-a7dd-6384b4586d64", write = FALSE)
spiders <- read_csv("data/spiders_with_locs.csv")%>% clean_names()
spiders <- spiders %>% filter(latitude<=42)
spiders <- spiders %>% filter(latitude<=42)
spiders %>%
select(latitude, longitude) %>%
summary()
lat <- c(34.67, 41.80)
long <- c(-124.1, -115.5)
bbox <- make_bbox(long, lat, f = 0.03) #f is the fraction of the bounding box to add to the range
map1 <- get_stadiamap(bbox, maptype = "stamen_terrain", zoom=7)
ggmap(map1)
ggmap(map1) +
geom_point(data = spiders, aes(longitude, latitude), size=0.4) +
labs(x= "Longitude", y= "Latitude", title="Spider Locations")
sharks <- read_csv("data/SharkIncidents_1950_2022_220302.csv") %>%
clean_names() %>%
filter(longitude !="NA" & latitude !="NA") %>% # pulling out NA locations
mutate(longitude = as.numeric(longitude)) # converting longitude to numeric
sharks_dups <- sharks %>%
distinct(location, .keep_all = TRUE) # remove duplicate locations, but keep the remaining variables
summary(sharks_dups)
summary(sharks_dups) %>%
select(latitude, longitude)
summary(sharks_dups) %>%
select(latitude, longitude)
View(sharks_dups)
summary(sharks_dups) %>%
select(latitude, longitude)
sharks_dups %>%
select(latitude, longitude) %>%
summary()
lat <- c(32.59, 41.56)
long <- c(-124.7, -117.1)
bbox <- make_bbox(long, lat, f = 0.03)
lat <- c(32.59, 41.56)
long <- c(-124.7, -117.1)
bbox2 <- make_bbox(long, lat, f = 0.03)
map1 <- get_stadiamap(bbox, maptype = "stamen_terrain", zoom=7)
map2 <- get_stadiamap(bbox, maptype = "stamen_terrain", zoom=7)
ggmap(map2)
ggmap(map2) +
geom_point(data = sharks_dups, aes(longitude, latitude), size=0.4) +
labs(x= "Longitude", y= "Latitude", title="SHark Attack Locations")
ggmap(map2) +
geom_point(data = sharks_dups, aes(longitude, latitude), size=0.4) +
labs(x= "Longitude", y= "Latitude", title="Shark Attack Locations")
shark_fatal <- sharks_dups %>%
filter(injury=="fatal")
sharks_fatal %>%
select(latitude, longitude) %>%
summary()
shark_fatal %>%
select(latitude, longitude) %>%
summary()
lat <- c(32.85, 39.58)
long <- c(-123.8, -117.3)
bbox3 <- make_bbox(long, lat, f = 0.03)
map3 <- get_stadiamap(bbox, maptype = "stamen_terrain", zoom=7)
ggmap(map3) +
geom_point(data = sharks_dups, aes(longitude, latitude), size=0.4) +
labs(x= "Longitude", y= "Latitude", title="Shark Attack Resulting in Fatalities Locations")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(ggmap)
grizzly <- read_csv("data/bear-sightings.csv") %>% clean_names()
summary(grizzly)
wolves <- read_csv("wolves_data/wolves_dataset.csv") %>% clean_names()
wolves <- read_csv("data/wolves_data/wolves_dataset.csv") %>% clean_names()
ggmap(map3) +
geom_point(data = sharks_fatal, aes(longitude, latitude), size=0.4) +
labs(x= "Longitude", y= "Latitude", title="Shark Attack Resulting in Fatalities Locations")
ggmap(map3) +
geom_point(data = shark_fatal, aes(longitude, latitude), size=0.4) +
labs(x= "Longitude", y= "Latitude", title="Shark Attack Resulting in Fatalities Locations")
lat <- c(55.02, 70.37)
long <- c(-166.2, -131.3)
